\documentclass{cmnp}
\usetikzlibrary{decorations.text}
\usepgfplotslibrary{units}
\usepackage{ts-plot}

\pgfplotsset{
  width=70mm,
  title style={align=center},
  log basis x=2,
  xlabel={array size $n$},
  ylabel={elapsed time $t$},
  use units,
  y unit=s,
  xtick distance=2^2,
  legend pos=north west,
  legend columns=-1,
}

\begin{document}
  \begin{tikzpicture}
    \begin{scope}
      \begin{loglogaxis}[
        title={Shell Sort vs. Ins. Sort \\(Best-case)},
        xmin=2^6,
        xmax=2^18,
        ymin=10^0.95,
        ymax=10^11,
        y unit prefix=n,
        ytick distance=10^2,
        legend entries={\small Shell,\small Ins.},
      ]
        % shell sort
        \addplot[markplot] table [x=n,y=t]{
               n          t
             128    223.236
             256    521.503
             512   1145.996
            1024   2547.677
            2048   5694.136
            4096  12740.414
            8192  32102.843
           16384  85733.542
           32768 152201.963
           65536 359099.158
          131072 860194.811
        };

        % insertion sort
        \addplot[markploto] table [x=n,y=t]{
               n         t
             128    41.331
             256    86.527
             512   166.992
            1024   328.061
            2048   655.077
            4096  1315.272
            8192  3091.728
           16384  6077.352
           32768 12289.136
           65536 25985.574
          131072 59708.181
        };

        % regression for Shell sort
        \addplot[domain=64:262144,samples=25] { 0.680 * x^1.19 };
        \addplot[domain=64:242144,samples=25,draw=none,decorate,decoration={
          text along path,text align={center},raise=3.5mm,text={|\footnotesize| {$t = 0.680 n^{1.04}\:(R^2 \geq 0.999)$}}
        }] { 0.680 * x^1.19 };
      \end{loglogaxis}
    \end{scope}

    \begin{scope}[xshift=80mm]
      \begin{loglogaxis}[
        title={Shell Sort vs. Ins. Sort \\(Worst-case)},
        xmin=2^6,
        xmax=2^18,
        ymin=10^0.95,
        ymax=10^11,
        y unit prefix=n,
        ytick distance=10^2,
        legend entries={\small Shell,\small Ins.},
      ]
        % shell sort
        \addplot[markplot] table [x=n,y=t]{
               n        t
             128    1276
             256    3070
             512    6266
            1024   14869
            2048   34414
            4096   81205
            8192  147674
           16384  414177
           32768  929291
           65536 2338755
          131072 5172701
        };

        % insertion sort
        \addplot[markploto] table [x=n,y=t]{
               n            t
             128       15193
             256       72249
             512      262639
            1024     1322160
            2048     5873502
            4096    23125643
            8192    92194907
           16384   375706650
           32768  1556346381
           65536  6601758459
          131072 29108835833
        };

        % regression for Shell sort
        \addplot[domain=64:262144,samples=25] { 3.76 * x^1.20 };
        \addplot[domain=64:242144,samples=25,draw=none,decorate,decoration={
          text along path,text align={center},raise=-5.0mm,text={|\footnotesize| {$t = 3.76 n^{1.20}\:(R^2 \geq 0.999)$}}
        }] { 3.76 * x^1.20 };
      \end{loglogaxis}
    \end{scope}
  \end{tikzpicture}
\end{document}
